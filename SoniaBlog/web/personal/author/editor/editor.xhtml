<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:t="http://myfaces.apache.org/tomahawk">
  
  <body>
    
    <ui:composition template="../../template.xhtml">
      
      <ui:define name="title">
        <h:outputText value="#{label.entries}" />
      </ui:define>
      
      <ui:define name="head">
        <script type="text/javascript" src="${facesContext.externalContext.requestContextPath}/resources/tiny_mce/tiny_mce.js"></script>
        <script type="text/javascript">
          tinyMCE.init({
            theme : "advanced",
            mode : "textareas",
            skin : "jab",
            plugins : "fullscreen,safari,emotions,imgbrowser,attachment,links,table",
            theme_advanced_buttons3_add : "|,table,emotions,fullscreen,|,imgbrowser,attachment,links",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            <h:outputText value="content_css: '#{EntryBean.contentCSS}?' + new Date().getTime(),"
                          rendered="#{BlogBean.template.contentCSS != null}" />
            convert_urls : false,
            <h:outputText value="document_base_url : '#{EntryBean.baseUrl}'," />
            fullscreen_new_window : true,
            fullscreen_settings : {
              theme_advanced_path_location : "top"
            }
          });

        </script>
      </ui:define>
      
      <ui:define name="content">

        <h1><h:outputText value="#{label.entries}" /></h1>
        
        <h:form enctype="multipart/form-data">
          
          <h:panelGrid columns="2" styleClass="editor" columnClasses="e1,e2">
            
            <h:outputLabel for="title" value="#{label.title}" />
            <h:panelGroup>
              <h:inputText styleClass="full" id="title" value="#{EntryBean.entry.title}" required="true" />
              <h:message for="title" />
            </h:panelGroup>
            
            <h:outputLabel for="tags" value="#{label.tags}" />
            <h:panelGroup>
              <h:inputText id="tags" styleClass="full" value="#{EntryBean.tagString}" />
              <h:message for="tags" />
            </h:panelGroup>
            
            <h:outputLabel for="categories" value="#{label.categories}" />
            <h:panelGroup>
              <h:selectManyCheckbox id="categories" value="#{EntryBean.entry.categories}" converter="converter.category">
                <f:selectItems value="#{EntryBean.categoryItems}" />
              </h:selectManyCheckbox>
              <h:message for="categories" />
            </h:panelGroup>
            
            <h:outputLabel for="content" value="#{label.content}" />
            <h:panelGroup>
              <h:inputTextarea id="content" style="width: 100%; height: 300px;" value="#{EntryBean.entry.content}" required="true" />
              <h:message for="content" />
            </h:panelGroup>
            
            <h:outputLabel for="teaser" value="#{label.teaser}" />
            <h:panelGroup>
              <h:inputTextarea id="teaser" style="width: 100%; height: 150px;" value="#{EntryBean.entry.teaser}">
                <f:validateLength maximum="5000" />
              </h:inputTextarea>
              <h:message for="teaser" />
            </h:panelGroup>
            
          </h:panelGrid>
          
          <h:commandButton value="#{label.publish}" action="#{EntryBean.publish}" />
          <h:commandButton value="#{label.saveDraft}" action="#{EntryBean.saveDraft}" />
          <h:commandButton value="#{label.remove}" action="#{EntryBean.remove}" />
          
        </h:form>
        
      </ui:define>
      
    </ui:composition>
    
  </body>
</html>
